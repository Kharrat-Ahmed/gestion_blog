<!-- gestion_blog/templates/gestion_blog/post_detail.html -->

{% block header %}
  Welcome to My Blog
  <br>
{% endblock %}
<nav>
  <a href="{% url 'post_list' %}">Posts</a> <br>
  {% if user.is_authenticated %}
      <a href="{% url 'add_post' %}">Add Post</a> <br>
      <a href="{% url 'profile' %}">Profile</a> <br>
      <form action="{% url 'logout' %}" method="post">
          {% csrf_token %}
          <input type="submit" value="Logout">
      </form> <br>
  {% else %}
      <a href="{% url 'login' %}">Login</a> <br>
      <a href="{% url 'register' %}">Register</a>
  {% endif %}
</nav>

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
  <h1>{{ post.title }}</h1>
  <p>{{ post.content }}</p>
  <p>Author: {{ post.author.username }}</p>
  <p>Published on: {{ post.pub_date }}</p>

  <h2>Comments</h2>
  {% for comment in comments %}
    <p>{{ comment.text }} - by {{ comment.author.username }} on {{ comment.pub_date }}</p>
  {% endfor %}

  <h2>Add a Comment</h2>
  <form method="post" action="{% url 'add_comment' slug=post.slug %}">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Submit Comment</button>
  </form>
{% endblock %}
